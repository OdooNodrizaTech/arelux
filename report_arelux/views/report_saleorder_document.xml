<?xml version="1.0" encoding="utf-8"?>
<odoo>    
    <template id="report_arelux_report_saleorder_document" name="report_arelux_report_saleorder_document" customize_show="True" inherit_id="sale.report_saleorder_document" priority="20">
        <xpath expr="//div" position="replace">
            <t t-if="doc.ar_qt_activity_type=='arelux'">                
                <t t-set="custom_color_1" t-value="'#195660'" />
                <t t-set="custom_color_2" t-value="'#307584'" />
                <t t-set="custom_color_3" t-value="'#4996AA'" />
                <t t-set="custom_color_4" t-value="'#60B2C4'" />
                <t t-set="custom_color_5" t-value="'#8ECCD3'" />
            </t>
            <t t-else="">
                <t t-set="custom_color_1" t-value="'#12575E'" />
                <t t-set="custom_color_2" t-value="'#076973'" />
                <t t-set="custom_color_3" t-value="'#057473'" />
                <t t-set="custom_color_4" t-value="'#008C73'" />
                <t t-set="custom_color_5" t-value="'#18A379'" />
            </t>
            <div class="page">
                <div class="oe_structure"/>
                <div class="row" style="margin-bottom: 20px;">
                    <div class="col-xs-6" style="margin-top:10px;">
                        <t t-if="doc.proforma==True">
                            <div class='title_bar' t-att-style="'background:'+custom_color_1+';color: white;font-weight: bold;padding: 5px 5px 5px 15px;width:100%;'">Direccion de facturación</div>                    
                            <div style="margin-left:15px;margin-top: 5px;">
                               <p t-field="doc.partner_invoice_id.name" style="margin-bottom:0px;" />
                               <p t-field="doc.partner_invoice_id.street" style="margin-bottom:0px;" />
                               <p style="margin-bottom:0px;"><span t-field="doc.partner_invoice_id.zip" /> <span t-field="doc.partner_invoice_id.city" /></p>
                               <p t-field="doc.partner_invoice_id.country_id" style="margin-bottom:0px;" />
                               <t t-if="doc.partner_invoice_id.phone">
                                    <p style="margin-bottom:0px;">
                                        <i class="fa fa-phone"></i>
                                        <span t-field="doc.partner_invoice_id.phone" />
                                    </p>
                               </t>
                               <p t-if="doc.partner_invoice_id.vat" style="margin-bottom: 0px;">NIF: <span t-field="doc.partner_invoice_id.vat"/></p>
                            </div>
                        </t>
                        <t t-if="doc.proforma==False">
                            <div class='title_bar' t-att-style="'background:'+custom_color_1+';color: white;font-weight: bold;padding: 5px 5px 5px 15px;width:100%;'">Cliente</div>                    
                            <div style="margin-left:15px;margin-top: 5px;">
                               <p t-field="doc.partner_id.name" style="margin-bottom:0px;" />
                               <p t-field="doc.partner_id.street" style="margin-bottom:0px;" />
                               <p style="margin-bottom:0px;"><span t-field="doc.partner_id.zip" /> <span t-field="doc.partner_id.city" /></p>
                               <p t-field="doc.partner_id.country_id" style="margin-bottom:0px;" />
                               <t t-if="doc.partner_id.phone">
                                    <p style="margin-bottom:0px;">
                                        <i class="fa fa-phone"></i>
                                        <span t-field="doc.partner_id.phone"  />
                                    </p>
                               </t>
                               <p t-if="doc.partner_id.vat" style="margin-bottom: 0px;">NIF: <span t-field="doc.partner_id.vat"/></p>
                            </div>
                        </t>
                    </div>
                    <div class="col-xs-6" style="padding-right: 0px;padding-left:0px;margin-top:10px;">
                        <div t-if="doc.partner_shipping_id != doc.partner_id" class='title_bar' t-att-style="'background:'+custom_color_1+';color: white;font-weight: bold;padding: 5px 5px 5px 15px;width:100%;'">Direccion de envío</div>                    
                        <t t-if="doc.partner_shipping_id != doc.partner_id">
                            <div style="margin-left:15px;margin-top: 5px;">
                               <p t-field="doc.partner_shipping_id.name" style="margin-bottom:0px;" />
                               <p t-field="doc.partner_shipping_id.street" style="margin-bottom:0px;" />
                               <p style="margin-bottom:0px;"><span t-field="doc.partner_shipping_id.zip" /> <span t-field="doc.partner_shipping_id.city" /></p>
                               <p t-field="doc.partner_shipping_id.country_id" style="margin-bottom:0px;" />
                               <t t-if="doc.partner_shipping_id.phone">
                                    <p style="margin-bottom:0px;">
                                        <i class="fa fa-phone"></i>
                                        <span t-field="doc.partner_shipping_id.phone" />
                                    </p>
                               </t>
                               <p t-if="doc.partner_shipping_id.vat" style="margin-bottom: 0px;">NIF: <span t-field="doc.partner_shipping_id.vat"/></p>
                            </div>
                        </t>
                    </div>
                </div>
                <div class="row" style="margin-bottom: 15px;">
                    <div class="col-xs-6">
                        <h4 style="font-weight:bold;margin-bottom:0px;">
                        <t t-if="doc.proforma==False">Presupuesto</t>
                        <t t-if="doc.proforma==True">Factura Proforma</t>
                        # <span t-field="doc.name"/>
                        </h4>
                    </div>
                    <div class="col-xs-3" style="padding-right: 0px;padding-left: 0px;">
                        <t t-if="doc.payment_term_id">
                            <div class='title_bar' t-att-style="'background:'+custom_color_2+';color: white;font-weight: bold;width:100%;padding:5px 5px 5px 15px;margin-bottom: 5px;'">Plazo de pago</div>                    
                            <p t-field="doc.payment_term_id" style="padding-left: 15px;" />
                        </t>
                    </div>
                    <div class="col-xs-3" style="padding-right: 0px;">
                        <t t-if="doc.payment_mode_id">
                            <div class='title_bar' t-att-style="'background:'+custom_color_2+';color: white;font-weight: bold;width:100%;padding:5px 5px 5px 15px;margin-bottom: 5px;'">Forma de pago</div>
                            <p t-field="doc.payment_mode_id" style="padding-left: 15px;" />
                        </t>
                    </div>
                </div>
                <div class="row" id="informations" style="margin-bottom: 10px;">
                    <div class="col-xs-6">
                        <div class='title_bar' t-att-style="'background:'+custom_color_2+';color: white;font-weight: bold;padding: 5px 5px 5px 15px;width:100%;margin-bottom: 5px;'">Fecha de presupuesto</div>    
                        <p t-field="doc.date_order" style="padding-left: 15px;" />
                    </div>
                    <div class="col-xs-3" style="text-align:center;padding-right:0px;padding-left: 0px;">
                        <t t-if="doc.user_id.name">
                            <div class='title_bar' t-att-style="'background:'+custom_color_2+';color: white;font-weight: bold;padding: 5px;width:100%;margin-bottom: 5px;'">Asesor comercial</div>    
                            <p style="margin-bottom: 0px;"><span t-field="doc.user_id"/> <span t-field="doc.user_id.commercial_phone"/></p>
                            <p t-field="doc.user_id.commercial_email"/>
                        </t>
                    </div>    
                    <div class="col-xs-3" style="text-align:center;padding-right: 0px;">
                        <t t-if="doc.validity_date">
                            <div class='title_bar' t-att-style="'background:'+custom_color_2+';color: white;font-weight: bold;padding: 5px;width:100%;margin-bottom: 5px;'">Fecha de caducidad</div>                        
                            <p t-field="doc.validity_date"/>
                        </t>
                    </div>
                </div>
                <!-- Is there a discount on at least one line? -->
                <t t-set="display_discount" t-value="any([l.discount for l in doc.order_line])"/>
                <t t-foreach="doc.order_lines_layouted()" t-as="page">
                    <div class="row" id="table_header">
                        <div class="col-xs-6">
                            <div class="title_bar" t-att-style="'background:'+custom_color_3+';color: white;font-weight: bold;padding-left: 15px;width:100%;height: 40px;line-height: 40px;'">Descripción</div>
                        </div>
                        <div class="col-xs-1" style="padding-right: 0px;padding-left: 0px;">
                            <div class="title_bar" t-att-style="'background:'+custom_color_3+';color: white;font-weight: bold;width:100%;text-align:center;'">Cantidad<br/><small>m2/Kg/L</small></div>
                        </div>
                        <div class="col-xs-2" style="padding-right:0px;">
                            <div class="title_bar" t-att-style="'background:'+custom_color_3+';color: white;font-weight: bold;width:100%;height: 40px;line-height: 40px;text-align:center;'">Precio unitario</div>
                        </div>
                        <div class="col-xs-1" style="padding-right:0px;">
                            <div class="title_bar" t-att-style="'background:'+custom_color_3+';color: white;font-weight: bold;width:100%;height: 40px;line-height: 40px;text-align:center;'">Dto.</div>
                        </div>
                        <div class="col-xs-2" style="padding-right: 0px;">
                            <div class="title_bar" t-att-style="'background:'+custom_color_3+';color: white;font-weight: bold;width:100%;height: 40px;line-height: 40px;text-align:center;'">Importe</div>
                        </div>
                    </div>
                    <t t-foreach="page" t-as="layout_category">
                        <t t-foreach="layout_category['lines']" t-as="l">
                            <div class="row" style="padding: 5px 0px;">
                                <div class="col-xs-6">
                                   <span t-field="l.name" style="padding-left:15px" />
                                </div>
                                <div class="col-xs-1" style="text-align:center;padding-left: 0px;padding-right: 0px;">
                                    <t t-if="l.product_uom_qty>0">
                                        <span t-field="l.product_uom_qty"/>
                                    </t>
                                </div>
                                <div class="col-xs-2" style="text-align:center;padding-right:0px;">
                                    <t t-if="l.price_unit>0">
                                        <!--<span t-field="l.price_unit"/>!-->
                                        <span t-esc="l.price_unit" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                    </t>
                                </div>
                                <div class="col-xs-1" groups="sale.group_discount_per_so_line" style="text-align:center;padding-right:0px;">
                                    <t t-if="l.discount>0">
                                       <span t-field="l.discount"/>%
                                    </t>
                                </div>
                                <div class="col-xs-2" style="text-align:right;" groups="sale.group_show_price_subtotal">
                                    <t t-if="l.price_subtotal>0">
                                        <span t-field="l.price_subtotal" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                    </t>
                                </div>
                            </div>
                        </t>
                    </t>
                    <t t-if="doc.show_total==True">
                        <div class="row" style="margin-top: 20px;">
                            <div class="col-xs-5"></div>
                            <div class="col-xs-2"></div>
                            <div class="col-xs-5" style="border-top:1px solid black;">
                                <div class="row" style="padding-bottom:5px;">
                                    <div class="col-xs-8">Base imponible</div>
                                    <div class="col-xs-4" style="text-align:right;">
                                        <span t-field="doc.amount_untaxed" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                    </div>
                                </div>
                                <div class="row" style="padding-bottom:5px;">
                                    <!--<div class="col-xs-8">Iva</div>!-->
                                    <div class="col-xs-8">
                                        <t t-set="order_taxes" t-value="[]"/>
                                        <t t-foreach="page" t-as="layout_category">
                                            <t t-foreach="layout_category['lines']" t-as="l">
                                                <t t-foreach="l.tax_id" t-as="tax">
                                                    <t t-set="order_taxes" t-value="list(set([tax.name]))"/>
                                                </t>
                                            </t>
                                        </t>
                                        <t t-foreach="order_taxes" t-as="order_tax">
                                            <span t-esc="order_tax"/>
                                        </t>
                                    </div>
                                    <div class="col-xs-4" style="text-align:right;">
                                        <span t-field="doc.amount_tax" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                    </div>
                                </div>
                                <div name="total" class="row" t-att-style="'border: 1px solid '+custom_color_3+';'">
                                    <div class="col-xs-8" t-att-style="'background:'+custom_color_4+';color:white;font-weight:bold;'">Total</div>
                                    <div class="col-xs-4" style="text-align:right;font-weight:bold;">
                                        <span t-field="doc.amount_total" t-options="{&quot;widget&quot;: &quot;monetary&quot;, &quot;display_currency&quot;: doc.pricelist_id.currency_id}"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                    <t t-if="doc.show_total==False">
                        <div class="row">
                            <p class="text-right" style="font-size: 11px;">*21% IVA no incluido</p>
                        </div>
                    </t>
                </t>
                <div class="row" style="margin-left: 0px;margin-right: 0px;">
                    <p style="font-size: 11px;">*Portes gratuitos en Península en pedidos superiores a 150 + IVA. Resto de zonas a consultar</p>
                </div>
                <div class="row">
                    <div class="col-xs-7" style="padding-left: 0px;">
                        <t t-if="doc.state!='sale'">
                            <t t-if="doc.opportunity_id!=0">
                                <t t-foreach="doc.opportunity_id.order_ids" t-as="order">
                                    <t t-if="order.state=='sale' and order.amount_total==0">
                                        <t t-foreach="order.picking_ids" t-as="picking">
                                            <t t-if="picking.shipping_expedition_id!=0">
                                                <div>
                                                    <strong>Expedición <span t-field="picking.carrier_id"/>:</strong> <span t-field="picking.shipping_expedition_id.delivery_code"/>
                                                </div>
                                            </t>
                                        </t>                        
                                    </t>
                                </t>
                            </t>
                        </t>
                    </div>
                    <div class="col-xs-5" style="padding-left: 0px;padding-right: 0px;padding-left: 0px;padding-right: 0px;">
                        <div class='title_bar' t-att-style="'background:'+custom_color_5+';color: white;font-weight: bold;padding: 5px;width:100%%;text-align:center;'">Observaciones</div>                                                
                        <div t-att-style="'border-left: 1px solid '+custom_color_5+';border-right:1px solid '+custom_color_5+';border-bottom:1px solid  '+custom_color_5+';padding: 10px;'">
                            <p style="font-size:11px;" t-field="doc.note"/>
                            <t t-if="doc.proforma==True">
                                <t t-if="doc.picking_note">
                                    <div style="padding-top:10px;">
                                        <p style="font-size:11px;" t-field="doc.picking_note"/>        
                                    </div>
                                </t>
                            </t>
                        </div>
                    </div>
                 </div>
                <t t-if="doc.amount_total>0">
                    <t t-if="doc.claim==False">
                        <t t-if="doc.payment_mode_id.id>0">
                            <t t-if="doc.payment_mode_id.show_payment_method_id_journal_ids_in_pdf==True">
                                <div class="acc_numbers" style="margin-top:30px;">
                                    <p style="text-decoration:underline;">Números de Cuenta a favor de TodoCesped/Arelux</p>
                                    <ul style="padding-left: 20px;">
                                        <t t-if="doc.payment_mode_id.bank_account_link=='fixed'">
                                            <li><span t-field="doc.payment_mode_id.fixed_journal_id.bank_account_id.bank_id.public_name" />: <span t-field="doc.payment_mode_id.fixed_journal_id.bank_account_id.acc_number" /></li>
                                        </t>
                                        <t t-if="doc.payment_mode_id.bank_account_link=='variable'">
                                            <t t-foreach="doc.payment_mode_id.variable_journal_ids" t-as="journal_id">
                                                <li><span t-field="journal_id.bank_account_id.bank_id.public_name" />: <span t-field="journal_id.bank_account_id.acc_number" /></li>
                                            </t>
                                        </t>
                                    </ul>
                                    <br/>
                                    <p>Rogamos indiquen nombre y número de pedido. <b><span t-field="doc.name" /></b></p>
                                    <p>Para mayor rapidez en la gestión de su pedido, remita el justificante de la transferencia a su comercial.</p>
                                </div>
                            </t>
                        </t>
                    </t>                        
                </t>
                 <!--
                 <p id="fiscal_position_remark" t-if="doc.fiscal_position_id and doc.fiscal_position_id.note">
                     <strong>Fiscal Position Remark:</strong>
                     <span t-field="doc.fiscal_position_id.note"/>
                 </p>
                 !-->
                <div class="oe_structure"/>
            </div>
        </xpath>        
    </template>                
</odoo>